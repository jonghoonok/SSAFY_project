# Final Project



[TOC]

# Movies

![hom](hom.png)



## 0. 팀원 및 업무 분담

- 기본적으로 백, 프론트 구분하지 않고 함께 진행

- 김동현 - 프론트, 백엔드(6:4의 비율로 진행)
  - 기본적인 UI 기능 구현(슬라이딩 이미지 등)
- 옥종훈 - 프론트, 백엔드(4:6의 비율로 진행)
  - API server(KEY를 통한 Youtube API와의 통신), Data Seeding(json) 등



## 1. 서비스 컨셉

유저들의 리뷰 정보를 기반으로 영화를 추천하는 사이트



## 2. 제작 과정



### 2.1. 11월 23일

11월 23일의 과제는 크게 두 가지였는데, 하나는 영화 검색 기능의 강화, 하나는 추천 알고리즘의 도입을 위한 사전 작업이었다.



먼저 검색 기능의 강화를 위해 실시한 작업은 다음과 같다.

- TMDB API를 이용해 서버에 2000개 분량의 영화 JSON파일을 저장하도록 함
- 영화 검색 결과에서 이미 리뷰가 작성된 영화에 리뷰 갯수와 평점이 뜨지 않는 오류 개선
- 영화 검색 결과에서 ''리뷰 보러가기' 버튼 삭제
  - 대신에 '영화 상세 정보' 버튼 및 페이지 생성
- 영화 상세 정보 페이지 레이아웃 만들기
  - 전체적으로 왓챠피디아의 레이아웃을 참고하여 작성
  - 해당 영화에 대한 리뷰는 댓글 식으로 하단에 리스트를 제시
  - 리스트를 클릭하면 리뷰 상세 페이지로 이동





다음으로 추천 알고리즘 도입을 위한 사전 작업에서는 다음과 같은 일들을 했다.

- 추천된 영화 목록을 슬라이딩하면서 볼 수 있도록 해당 시스템을 도입
  - bootstrap에 있는 슬라이드 기능을 사용
- 영화 추천 버튼 및 추천 view함수 생성
- 추천 알고리즘 확립
  - 사용자의 리뷰에서 가장 많이 등장한 장르나 감독의 수를 count
  - 해당 장르/감독의 영화들을 '인기도 순으로' 리스트에 담아 반환
  - 단, 사용자가 이미 리뷰를 남긴 영화는 리스트에서 제외



### 2.2. 11월 24일

한 일 - 추천 알고리즘의 완성 및 기능 향상, 영화 디테일 페이지 완성,  검색기능 향상, 그외 자잘한 것들 



추천 알고리즘 기능 향상 및 완성(슬라이드 기능 포함)

- jquery에서 사용 가능한 swipe를 통해 슬라이드 코드를 새롭게 작성
  - bootstrap을 통해 작성한 슬라이드 기능은 한 페이지에서 이미지를 보여주는 것이 되지 않는 문제가 있었음
    - 이러한 문제를 해결하기 위해 swipe를 통해 슬라이드 기능 구현
      - 그 결과, 원하는 만큼의 이미지를 한 페이지(ex. 1번 슬라이드)에서 보여줄 수 있게 되었음
      - 화살표를 이미지 페이지(ex. 1번 슬라이드)에 고정함 == 페이지의 크기에 따라 버튼의 위치가 조정 됨

- 추천 기준을 조금 더 세분화해서 나눔
  - 사용자가 작성한 리뷰 중 최빈 장르를 기준으로 하는 추천 리스트
  - 인기도를 기준으로 하는 추천 리스트
    - 해당 리스트는 비로그인 사용자와 리뷰를 작성하지 않아 취향을 파악할 수 없는 사용자를 위한 기준
- <a href=>를 통해서 영화 포스터와 해당 영화의 상세 정보 페이지를 연결 함



영화 디테일 페이지 완성

- youtube api로 요청을 보내서 영화 트레일러 영상을 받아 옴
  - 페이지 이동 없이 해당 영화의 트레일러 영상을 확인할 수 있게 됨
- 그 외 영화 줄거리, 평점, 리뷰 리스트를 확인할 수 있게끔 만듬



검색 기능 향상

- 기존에는 정확한 영화 제목을 입력해야만 영화 목록을 확인할 수 있었음
- json 파일의 인자들 중 title 값에 검색창에 입력 된 인자가 포함되어 있다면 검색 결과를 확인할 수 있도록 코드 수정
  - `title in movie.title`코드를 통해서



그 외 미흡했던 기능을 보완 했음

- 영화 상세정보 페이지에서 리뷰 작성 페이지로의 연결이 가능하도록 코드 수정
  - `{% url 'community:create' 영화 제목 %}`
- 내 정보 페이지에서 나의 정보를 수정할 수 있도록 코드 수정



24일 해결하지 못한 것들

- 플로팅 배너를 만들어서 내가 검색했던 영화들을 한 눈에 볼 수 있게끔 만듬
- 단어 자동완성 기능을 통해서 사용자의 편리함을 향상
  - localstorage나 cookie, session 등의 기능을 사용해야 함



### 2.3. 11월 25일 ~ 26일 

25 ~ 26일 간의 목표는 CSS와 기능을 다시 확인하여 마무리하는 것



#### Template 활용

프로젝트 초기에는 직접 사이트의 구도나 내부 페이지를 꾸미면서 진행하였다. 그러나 이 작업에 너무 많은 시간이 소요되어서 Template을 활용하기로 결정함. 예상했던 페이지 구조에 맞는 Template을 선별하고, 이를 활용하여 CSS적인 디자인을 보완하였다.



#### Template 문제점

Template를 사용한 직후에는 만족도가 높았으나 이내 문제들이 터지기 시작함. 기존 코드와의 충돌, 수정의 어려움 등... 결국 코드를 하나씩 뜯어보면서 style, css 등을 이해하면서 진행할 수밖에 없었다. 이를 위해 `개발도구`와 `구글링`을 적극 활용하였다.



#### 슬라이딩 이미지

Swipe를 기반으로 슬라이딩 이미지를 구현했는데, 원하는 구도가 안 만들어지고, 특정 상황에서 오류가 발생하는 것을 확인했다. 이에 Template에 있던 슬라이딩 기능을 활용하여 원했던 기능을 구현할 수 있었다.



#### 추천 기능의 문제

추천 기능을 위해 django HTML에서 if 문을 작성했는데, 여기에서 문제가 발생했다.

```django
if posters(넘어온 데이터).length != 0 이라는 조건을 주면
모든 유저가 인기도를 기준으로한 영화만을 추천받을 수 있고,
if posters.length > 0 이라는 조건을 달면
로그인 했지만, 리뷰를 작성하지 않은 유저가 아무런 영화도 추천받을 수 없는 문제가 발생했다

결국 if posters.length 로 작성한 후에야 문제를 해결할 수 있었다
```



#### login form 등

단순히 디자인을 바꾸면 될 것이라 생각하고 접근했는데, 구글링 결과 form을 다시 작성하고, URL을 변경해야 하는 등의 문제점을 파악했다. 결국 detail 페이지의 form만 수정할 수 있었다.



#### 그 외

직접 사이트틀 이용해보면서 자잘한 오류들(철자 오류, 연결 오류, require_login 등)을 해결해 나갔고, CSS 수정을 통해 사이트의 통일성을 맞췄다.





## 6. 느낀점

- 김동현

  평소 많이 구현해봤던 기능들이었지만(CRUD), 이를 맨 바닥에서 시작하는 일은 쉽지 않았다. 특히 초기에 배웠던 내용을 다시 떠올리는 것들이 쉽지 않았다.

  그리고 특히, CSS 적인 부분이 어려웠는데, 분명 내가 알고있는 지식에 따라 변화를 줬음에도 아무런 미동도 없을 때가 많았다. 결국, 개발자 도구를 통해 하나씩 되 짚어보면서 해결하였다.

  또한, Template는 CSS의 허들을 낮추는 데 많은 도움이 된다는 사실을 배웠다. 동시에 Template은 만능이 아니며, Template에 속한 코드를 이해하지 못한 채 사용한다면 언제든지 코드 간에 충돌이나, 수정을 할 때 크게 낭패를 볼 수 있기 때문이다.

  그러나 Template을 뜯어보면서 몰랐던 기능이나 디자인 패턴 등을 공부할 수도 있음을 느꼈다.

- 옥종훈

  우선 페이지 제작에 필요한 대부분의 기능은 구현 해본경험이 있었기 때문에 CSS만 걱정했으나, 그러나 쉬운 것은 하나도 없었다. form 변환이 그랬고, 코드 간에 충돌도 가장 큰 문제점 중 하나였다.

  나는 Back-end 부분을 더 많이 작업했는데, 작업을 하던 중에 많은 아이디어를 얻을 수 있었다. 그 중 하나가 채팅봇이었는데, 구글링을 통해 구현 방법을 찾던 중 내가 제작하는 사이트에는 채팅봇이 필요하지 않음을 깨달았던 적이 있다. 이러한 경험을 통해 개발자란 단순히 자신의 능력을 과시하는 사람이 아님을 잘 느낄 수 있었다. 사용자에게 필요한 기능을 고민해야 하며, 이를 위해 함께 일하는 동료와의 협업, 소통 과정의 중요함을 배웠다.

  이번 프로젝트 기간 동안 직접 사이트를 제작하며, 지금껏 배웠던 내용을 복습, 이해, 발전 시킬 수 있었다. 가장 단기간에 많은 내용을 배우고 경험할 수 있었던 시간이었다.